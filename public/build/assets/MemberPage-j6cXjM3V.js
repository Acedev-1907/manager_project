import{d as w,b as x,o as p,c as m,e as a,l as U,v as L,u as c,m as N,F as C,h as E,p as M,t as P,r as D,j as A,g as R,q as f,n as y,s as k,x as _,i as O,f as B,a as $,y as S}from"./app-CBQE5stu.js";import{m as V,s as j}from"./utils-DVHDyltg.js";import{m as q}from"./makeHttpReq-IEoXqM35.js";import{m as b}from"./MemberStore-DDQ-8FoU.js";import"./toast-notificaltion-CPrjx-mD.js";const G={class:"row"},T={class:"row"},z={class:"col-md-4"},F={style:{color:"blue"}},H={class:"row"},I={class:"table table-bordered table-hover table-striped mt-3"},K=["onClick"],J=w({__name:"MemberTable",props:{members:{},loading:{type:Boolean}},emits:["editMember","getMember"],setup(e,{emit:n}){const t=n,s=x(""),i=V(async function(){await t("getMember",1,s.value)},200);return(u,o)=>{var l,d;return p(),m("div",G,[a("div",T,[a("div",z,[U(a("input",{type:"text",onKeydown:o[0]||(o[0]=(...r)=>c(i)&&c(i)(...r)),"onUpdate:modelValue":o[1]||(o[1]=r=>s.value=r),placeholder:"search...",class:"form-control"},null,544),[[L,s.value]]),U(a("span",F,o[2]||(o[2]=[a("b",null,"Searching....",-1)]),512),[[N,u.loading===!0]])])]),o[4]||(o[4]=a("br",null,null,-1)),a("div",H,[a("table",I,[o[3]||(o[3]=a("tr",null,[a("td",null,"ID"),a("td",null,"Name"),a("td",null,"Email"),a("td",null,"Edit")],-1)),a("tbody",null,[(p(!0),m(C,null,E((d=(l=u.members)==null?void 0:l.data)==null?void 0:d.data,r=>(p(),m("tr",{key:r.id},[a("td",null,P(r.id),1),a("td",null,P(r.name),1),a("td",null,P(r.email),1),a("td",null,[a("button",{onClick:h=>t("editMember",r),class:"btn btn-outline-primary"},"Edit",8,K)])]))),128))])])]),M(u.$slots,"pagination")])}}});function Q(){const e=x(!1),n=x({});async function t(s=1,i=""){try{e.value=!0;const u=await q(`members?query=${i}&page=${s}`,"GET");e.value=!1,n.value=u}catch(u){e.value=!1,j(u)}}return{getMembers:t,memberData:n,loading:e}}const W={emits:["pagination-change-page"],props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},keepLength:{type:Boolean,default:!1}},computed:{isApiResource(){return!!this.data.meta},currentPage(){var e;return this.isApiResource?this.data.meta.current_page:(e=this.data.current_page)!=null?e:null},firstPageUrl(){var e,n,t,s,i;return(i=(s=(n=this.data.first_page_url)!=null?n:(e=this.data.meta)==null?void 0:e.first_page_url)!=null?s:(t=this.data.links)==null?void 0:t.first)!=null?i:null},from(){var e;return this.isApiResource?this.data.meta.from:(e=this.data.from)!=null?e:null},lastPage(){var e;return this.isApiResource?this.data.meta.last_page:(e=this.data.last_page)!=null?e:null},lastPageUrl(){var e,n,t,s,i;return(i=(s=(n=this.data.last_page_url)!=null?n:(e=this.data.meta)==null?void 0:e.last_page_url)!=null?s:(t=this.data.links)==null?void 0:t.last)!=null?i:null},nextPageUrl(){var e,n,t,s,i;return(i=(s=(n=this.data.next_page_url)!=null?n:(e=this.data.meta)==null?void 0:e.next_page_url)!=null?s:(t=this.data.links)==null?void 0:t.next)!=null?i:null},perPage(){var e;return this.isApiResource?this.data.meta.per_page:(e=this.data.per_page)!=null?e:null},prevPageUrl(){var e,n,t,s,i;return(i=(s=(n=this.data.prev_page_url)!=null?n:(e=this.data.meta)==null?void 0:e.prev_page_url)!=null?s:(t=this.data.links)==null?void 0:t.prev)!=null?i:null},to(){var e;return this.isApiResource?this.data.meta.to:(e=this.data.to)!=null?e:null},total(){var e;return this.isApiResource?this.data.meta.total:(e=this.data.total)!=null?e:null},pageRange(){if(this.limit===-1)return 0;if(this.limit===0)return this.lastPage;for(var e=this.currentPage,n=this.keepLength,t=this.lastPage,s=this.limit,i=e-s,u=e+s,o=(s+2)*2,l=(s+2)*2-1,d=[],r=[],h,g=1;g<=t;g++)(g===1||g===t||g>=i&&g<=u||n&&g<o&&e<o-2||n&&g>t-l&&e>t-l+2)&&d.push(g);return d.forEach(function(v){h&&(v-h===2?r.push(h+1):v-h!==1&&r.push("...")),r.push(v),h=v}),r}},methods:{previousPage(){this.selectPage(this.currentPage-1)},nextPage(){this.selectPage(this.currentPage+1)},selectPage(e){e==="..."||e===this.currentPage||this.$emit("pagination-change-page",e)}},render(){return this.$slots.default({data:this.data,limit:this.limit,computed:{isApiResource:this.isApiResource,currentPage:this.currentPage,firstPageUrl:this.firstPageUrl,from:this.from,lastPage:this.lastPage,lastPageUrl:this.lastPageUrl,nextPageUrl:this.nextPageUrl,perPage:this.perPage,prevPageUrl:this.prevPageUrl,to:this.to,total:this.total,pageRange:this.pageRange},prevButtonEvents:{click:e=>{e.preventDefault(),this.previousPage()}},nextButtonEvents:{click:e=>{e.preventDefault(),this.nextPage()}},pageButtonEvents:e=>({click:n=>{n.preventDefault(),this.selectPage(e)}})})}},X=(e,n)=>{const t=e.__vccOpts||e;for(const[s,i]of n)t[s]=i;return t},Y={compatConfig:{MODE:3},inheritAttrs:!1,emits:["pagination-change-page"],components:{RenderlessPagination:W},props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},showDisabled:{type:Boolean,default:!1},keepLength:{type:Boolean,default:!1},size:{type:String,default:"default",validator:e=>["small","default","large"].indexOf(e)!==-1},align:{type:String,default:"left",validator:e=>["left","center","right"].indexOf(e)!==-1}},methods:{onPaginationChangePage(e){this.$emit("pagination-change-page",e)}}},Z=["tabindex"],ee=a("span",{"aria-hidden":"true"},"«",-1),te=["aria-current"],ae=["tabindex"],ne=a("span",{"aria-hidden":"true"},"»",-1);function se(e,n,t,s,i,u){const o=D("RenderlessPagination");return p(),A(o,{data:t.data,limit:t.limit,"keep-length":t.keepLength,onPaginationChangePage:u.onPaginationChangePage},{default:R(l=>[l.computed.total>l.computed.perPage?(p(),m("ul",f({key:0},e.$attrs,{class:["pagination",{"pagination-sm":t.size=="small","pagination-lg":t.size=="large","justify-content-center":t.align=="center","justify-content-end":t.align=="right"}]}),[l.computed.prevPageUrl||t.showDisabled?(p(),m("li",{key:0,class:y(["page-item pagination-prev-nav",{disabled:!l.computed.prevPageUrl}])},[a("a",f({class:"page-link",href:"#","aria-label":"Previous",tabindex:!l.computed.prevPageUrl&&-1},k(l.prevButtonEvents,!0)),[M(e.$slots,"prev-nav",{},()=>[ee])],16,Z)],2)):_("",!0),(p(!0),m(C,null,E(l.computed.pageRange,(d,r)=>(p(),m("li",{class:y(["page-item pagination-page-nav",{active:d==l.computed.currentPage}]),key:r},[a("a",f({class:"page-link",href:"#"},k(l.pageButtonEvents(d),!0),{"aria-current":d==l.computed.currentPage?"page":null}),P(d),17,te)],2))),128)),l.computed.nextPageUrl||t.showDisabled?(p(),m("li",{key:1,class:y(["page-item pagination-next-nav",{disabled:!l.computed.nextPageUrl}])},[a("a",f({class:"page-link",href:"#","aria-label":"Next",tabindex:!l.computed.nextPageUrl&&-1},k(l.nextButtonEvents,!0)),[M(e.$slots,"next-nav",{},()=>[ne])],16,ae)],2)):_("",!0)],16)):_("",!0)]),_:3},8,["data","limit","keep-length","onPaginationChangePage"])}const le=X(Y,[["render",se]]),ie={class:"container"},re={class:"row"},oe={class:"col-md-8"},ue={class:"card"},de={class:"card-header"},pe={class:"card-body"},fe=w({__name:"MemberPage",setup(e){const{getMembers:n,memberData:t,loading:s}=Q();async function i(){await n()}console.log("Pagination Data:",t.value);function u(o){b.memberInput=o,b.edit=!0,S.push("/create-members")}return O(async()=>{i(),b.edit=!1,b.memberInput={}}),(o,l)=>{const d=D("RouterLink");return p(),m("div",ie,[a("div",re,[a("div",oe,[a("div",ue,[a("div",de,[l[1]||(l[1]=B("Member ")),$(d,{style:{float:"right"},to:"/create-members",class:"btn btn-primary"},{default:R(()=>l[0]||(l[0]=[B("Create Member ")])),_:1})]),a("div",pe,[$(J,{onEditMember:u,loading:c(s),onGetMember:c(n),members:c(t)},{pagination:R(()=>{var r;return[(r=c(t))!=null&&r.data?(p(),A(c(le),{key:0,data:c(t).data,onPaginationChangePage:c(n)},null,8,["data","onPaginationChangePage"])):_("",!0)]}),_:1},8,["loading","onGetMember","members"])])])])])])}}});export{fe as default};
