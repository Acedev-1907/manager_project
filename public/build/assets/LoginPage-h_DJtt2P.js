import{b as p,d as w,r as V,o as b,c as L,e as o,w as $,a as t,u as a,g as y,f as E}from"./app-DBj_bcfe.js";import{u as k,E as u,a as m,_ as x,r as c,e as C}from"./BaseBtn.vue_vue_type_script_setup_true_lang-Dxe_PpUr.js";import{m as N,s as R,a as S}from"./toast-notificaltion-DvZ91Y9a.js";import{s as h}from"./utils-z0dgqVqo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./APP-BkH2lvXh.js";const r=p({});function B(){const l=p(!1);async function d(){try{l.value=!0;const e=await N("login","POST",r.value);l.value=!1,r.value={},R(e.message),e.isLoggedIn&&(localStorage.setItem("userData",JSON.stringify(e)),window.location.href="/app/admin")}catch(e){h(e),l.value=!1;for(const n of e)S(n)}}return{login:d,loading:l}}const I={class:"row"},P={class:"row"},U={class:"col-md-4"},q={class:"card"},M={class:"card-body"},O={class:"form-group"},T={class:"form-group"},D={class:"form-group"},H={class:"form-group mt-3"},K=w({__name:"LoginPage",setup(l){const e=k({email:{required:c,email:C},password:{required:c}},r),{loading:n,login:f}=B();async function g(){await e.value.$validate()&&(await f(),e.value.$reset())}return(v,s)=>{const _=V("RouterLink");return b(),L("div",I,[o("div",P,[s[5]||(s[5]=o("div",{class:"col-md-4"},null,-1)),o("div",U,[o("div",q,[o("div",M,[s[3]||(s[3]=o("h2",{align:"center"},"Login",-1)),s[4]||(s[4]=o("br",null,null,-1)),o("form",{onSubmit:$(g,["prevent"])},[o("div",O,[t(u,{label:"Email",errors:a(e).email.$errors},null,8,["errors"]),t(m,{modelValue:a(r).email,"onUpdate:modelValue":s[0]||(s[0]=i=>a(r).email=i)},null,8,["modelValue"])]),o("div",T,[t(u,{label:"Password",errors:a(e).password.$errors},null,8,["errors"]),t(m,{modelValue:a(r).password,"onUpdate:modelValue":s[1]||(s[1]=i=>a(r).password=i),type:"password"},null,8,["modelValue"])]),o("div",D,[t(_,{to:"/register"},{default:y(()=>s[2]||(s[2]=[E("Create an account")])),_:1})]),o("div",H,[t(x,{label:"login",loading:a(n)},null,8,["loading"])])],32)])])]),s[6]||(s[6]=o("div",{class:"col-md-4"},null,-1))])])}}});export{K as default};
