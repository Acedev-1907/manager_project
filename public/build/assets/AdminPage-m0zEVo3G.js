import{d as b,b as _,o as l,c as r,e,u as m,f as d,t as f,F as w,h,a as c,g,n as x,R as U,i as L,r as $,T as C,j as T,k as j}from"./app-CBQE5stu.js";import{A as B,m as E,g as I}from"./makeHttpReq-IEoXqM35.js";const M={id:"sidebarMenu",style:{"background-color":"white"},class:"col-md-3 col-lg-2 d-md-block sidebar collapse"},P={class:"position-sticky pt-3"},A={align:"center"},N=["src"],R={class:"nav flex-column"},D=b({__name:"NarBar",props:{loggedInUserEmail:{}},emits:["logout"],setup(n,{emit:a}){const o=_([{name:"Dashboard",link:"/admin",icon:"bi bi-wrench-adjustable"},{name:"Projects",link:"/projects",icon:"bi bi-file-ppt"},{name:"Members",link:"/members",icon:"bi bi-file-ppt"}]),i=a;return(u,s)=>(l(),r("nav",M,[e("div",P,[e("div",A,[e("img",{src:`${m(B).baseURL}/others/logo.png`,style:{height:"55px"},alt:""},null,8,N),s[1]||(s[1]=e("h4",null,"TaskMgr",-1)),d(" "+f(u.loggedInUserEmail),1)]),s[3]||(s[3]=e("br",null,null,-1)),s[4]||(s[4]=e("h6",{class:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[e("span",{style:{color:"red"}},"Menu"),e("a",{class:"link-secondary",href:"#","aria-label":"Add a new report"},[e("span",{"data-feather":"plus-circle"})])],-1)),e("ul",R,[(l(!0),r(w,null,h(o.value,t=>(l(),r("li",{class:"nav-item",key:t.name},[c(m(U),{class:"nav-link",to:t.link,exact:""},{default:g(()=>[e("i",{class:x(t.icon)},null,2),d(" "+f(t.name),1)]),_:2},1032,["to"])]))),128)),e("li",{class:"nav-item",style:{cursor:"pointer"},onClick:s[0]||(s[0]=t=>i("logout"))},s[2]||(s[2]=[e("a",{class:"nav-link"},[e("i",{class:"bi bi-box-arrow-right"}),d(" Logout ")],-1)]))])])]))}});function S(){const n=_(!1);async function a(o){try{n.value=!0;const i=await E("logout","POST",{userId:o});n.value=!1}catch{n.value=!1}}return{logout:a,loading:n}}const V={class:"container"},F={class:"container-fluid"},O={class:"row"},q={class:"col-md-9 ms-sm-auto col-lg-10 bg-pages"},G=b({__name:"AdminPage",setup(n){const{logout:a}=S(),o=I();async function i(){var t;const s=(t=o==null?void 0:o.user)==null?void 0:t.id;typeof s<"u"&&(await a(s),localStorage.clear(),setTimeout(()=>window.location.href="/app/login",1e3))}async function u(){await a(void 0)}return L(async()=>{await u()}),(s,t)=>{var p;const k=$("router-view");return l(),r("div",V,[e("div",F,[e("div",O,[c(D,{loggedInUserEmail:(p=m(o))==null?void 0:p.user.email,onLogout:i},null,8,["loggedInUserEmail"]),e("main",q,[t[0]||(t[0]=e("br",null,null,-1)),t[1]||(t[1]=e("br",null,null,-1)),c(k,null,{default:g(({Component:v,route:y})=>[c(C,{name:"fade",mode:"out-in"},{default:g(()=>[(l(),r("div",{key:y.name},[(l(),T(j(v)))]))]),_:2},1024)]),_:1})])])])])}}});export{G as default};
