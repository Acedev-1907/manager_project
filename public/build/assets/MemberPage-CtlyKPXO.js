import{d as w,b as k,o as g,c,e as n,k as U,v as A,u as m,l as L,F as M,h as C,m as x,t as P,r as E,i as D,g as R,p as f,n as b,q as y,s as _,x as N,f as B,a as $}from"./app-DBj_bcfe.js";import{m as O,s as S}from"./utils-z0dgqVqo.js";import{m as V}from"./toast-notificaltion-DvZ91Y9a.js";import"./APP-BkH2lvXh.js";const q={class:"row"},T={class:"row"},j={class:"col-md-4"},z={style:{color:"blue"}},F={class:"row"},G={class:"table table-bordered table-hover table-striped mt-3"},H=["onClick"],I=w({__name:"MemberTable",props:{members:{},loading:{type:Boolean}},emits:["editMember","getMember"],setup(e,{emit:s}){const t=s,a=k(""),l=O(async function(){await t("getMember",a.value)},200);return(d,r)=>{var i,u;return g(),c("div",q,[n("div",T,[n("div",j,[U(n("input",{type:"text",onKeydown:r[0]||(r[0]=(...o)=>m(l)&&m(l)(...o)),"onUpdate:modelValue":r[1]||(r[1]=o=>a.value=o),placeholder:"search...",class:"form-control"},null,544),[[A,a.value]]),U(n("span",z,r[2]||(r[2]=[n("b",null,"Searching....",-1)]),512),[[L,d.loading===!0]])])]),r[4]||(r[4]=n("br",null,null,-1)),n("div",F,[n("table",G,[r[3]||(r[3]=n("tr",null,[n("td",null,"ID"),n("td",null,"Name"),n("td",null,"Email"),n("td",null,"Edit")],-1)),n("tbody",null,[(g(!0),c(M,null,C((u=(i=d.members)==null?void 0:i.data)==null?void 0:u.data,o=>(g(),c("tr",{key:o.id},[n("td",null,P(o.id),1),n("td",null,P(o.name),1),n("td",null,P(o.email),1),n("td",null,[n("button",{onClick:h=>t("editMember",o),class:"btn btn-outline-primary"},"Edit",8,H)])]))),128))])])]),x(d.$slots,"pagination")])}}});function K(){const e=k(!1),s=k({});async function t(a=1,l=""){try{e.value=!0;const d=await V(`members?query=${l}&page=${a}`,"GET");e.value=!1,s.value=d}catch(d){e.value=!1,S(d)}}return{getMembers:t,memberData:s,loading:e}}const J={emits:["pagination-change-page"],props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},keepLength:{type:Boolean,default:!1}},computed:{isApiResource(){return!!this.data.meta},currentPage(){var e;return this.isApiResource?this.data.meta.current_page:(e=this.data.current_page)!=null?e:null},firstPageUrl(){var e,s,t,a,l;return(l=(a=(s=this.data.first_page_url)!=null?s:(e=this.data.meta)==null?void 0:e.first_page_url)!=null?a:(t=this.data.links)==null?void 0:t.first)!=null?l:null},from(){var e;return this.isApiResource?this.data.meta.from:(e=this.data.from)!=null?e:null},lastPage(){var e;return this.isApiResource?this.data.meta.last_page:(e=this.data.last_page)!=null?e:null},lastPageUrl(){var e,s,t,a,l;return(l=(a=(s=this.data.last_page_url)!=null?s:(e=this.data.meta)==null?void 0:e.last_page_url)!=null?a:(t=this.data.links)==null?void 0:t.last)!=null?l:null},nextPageUrl(){var e,s,t,a,l;return(l=(a=(s=this.data.next_page_url)!=null?s:(e=this.data.meta)==null?void 0:e.next_page_url)!=null?a:(t=this.data.links)==null?void 0:t.next)!=null?l:null},perPage(){var e;return this.isApiResource?this.data.meta.per_page:(e=this.data.per_page)!=null?e:null},prevPageUrl(){var e,s,t,a,l;return(l=(a=(s=this.data.prev_page_url)!=null?s:(e=this.data.meta)==null?void 0:e.prev_page_url)!=null?a:(t=this.data.links)==null?void 0:t.prev)!=null?l:null},to(){var e;return this.isApiResource?this.data.meta.to:(e=this.data.to)!=null?e:null},total(){var e;return this.isApiResource?this.data.meta.total:(e=this.data.total)!=null?e:null},pageRange(){if(this.limit===-1)return 0;if(this.limit===0)return this.lastPage;for(var e=this.currentPage,s=this.keepLength,t=this.lastPage,a=this.limit,l=e-a,d=e+a,r=(a+2)*2,i=(a+2)*2-1,u=[],o=[],h,p=1;p<=t;p++)(p===1||p===t||p>=l&&p<=d||s&&p<r&&e<r-2||s&&p>t-i&&e>t-i+2)&&u.push(p);return u.forEach(function(v){h&&(v-h===2?o.push(h+1):v-h!==1&&o.push("...")),o.push(v),h=v}),o}},methods:{previousPage(){this.selectPage(this.currentPage-1)},nextPage(){this.selectPage(this.currentPage+1)},selectPage(e){e==="..."||e===this.currentPage||this.$emit("pagination-change-page",e)}},render(){return this.$slots.default({data:this.data,limit:this.limit,computed:{isApiResource:this.isApiResource,currentPage:this.currentPage,firstPageUrl:this.firstPageUrl,from:this.from,lastPage:this.lastPage,lastPageUrl:this.lastPageUrl,nextPageUrl:this.nextPageUrl,perPage:this.perPage,prevPageUrl:this.prevPageUrl,to:this.to,total:this.total,pageRange:this.pageRange},prevButtonEvents:{click:e=>{e.preventDefault(),this.previousPage()}},nextButtonEvents:{click:e=>{e.preventDefault(),this.nextPage()}},pageButtonEvents:e=>({click:s=>{s.preventDefault(),this.selectPage(e)}})})}},Q=(e,s)=>{const t=e.__vccOpts||e;for(const[a,l]of s)t[a]=l;return t},W={compatConfig:{MODE:3},inheritAttrs:!1,emits:["pagination-change-page"],components:{RenderlessPagination:J},props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},showDisabled:{type:Boolean,default:!1},keepLength:{type:Boolean,default:!1},size:{type:String,default:"default",validator:e=>["small","default","large"].indexOf(e)!==-1},align:{type:String,default:"left",validator:e=>["left","center","right"].indexOf(e)!==-1}},methods:{onPaginationChangePage(e){this.$emit("pagination-change-page",e)}}},X=["tabindex"],Y=n("span",{"aria-hidden":"true"},"«",-1),Z=["aria-current"],ee=["tabindex"],te=n("span",{"aria-hidden":"true"},"»",-1);function ae(e,s,t,a,l,d){const r=E("RenderlessPagination");return g(),D(r,{data:t.data,limit:t.limit,"keep-length":t.keepLength,onPaginationChangePage:d.onPaginationChangePage},{default:R(i=>[i.computed.total>i.computed.perPage?(g(),c("ul",f({key:0},e.$attrs,{class:["pagination",{"pagination-sm":t.size=="small","pagination-lg":t.size=="large","justify-content-center":t.align=="center","justify-content-end":t.align=="right"}]}),[i.computed.prevPageUrl||t.showDisabled?(g(),c("li",{key:0,class:b(["page-item pagination-prev-nav",{disabled:!i.computed.prevPageUrl}])},[n("a",f({class:"page-link",href:"#","aria-label":"Previous",tabindex:!i.computed.prevPageUrl&&-1},y(i.prevButtonEvents,!0)),[x(e.$slots,"prev-nav",{},()=>[Y])],16,X)],2)):_("",!0),(g(!0),c(M,null,C(i.computed.pageRange,(u,o)=>(g(),c("li",{class:b(["page-item pagination-page-nav",{active:u==i.computed.currentPage}]),key:o},[n("a",f({class:"page-link",href:"#"},y(i.pageButtonEvents(u),!0),{"aria-current":u==i.computed.currentPage?"page":null}),P(u),17,Z)],2))),128)),i.computed.nextPageUrl||t.showDisabled?(g(),c("li",{key:1,class:b(["page-item pagination-next-nav",{disabled:!i.computed.nextPageUrl}])},[n("a",f({class:"page-link",href:"#","aria-label":"Next",tabindex:!i.computed.nextPageUrl&&-1},y(i.nextButtonEvents,!0)),[x(e.$slots,"next-nav",{},()=>[te])],16,ee)],2)):_("",!0)],16)):_("",!0)]),_:3},8,["data","limit","keep-length","onPaginationChangePage"])}const ne=Q(W,[["render",ae]]),se={class:"container"},le={class:"row"},ie={class:"col-md-8"},re={class:"card"},oe={class:"card-header"},ue={class:"card-body"},me=w({__name:"MemberPage",setup(e){const{getMembers:s,loading:t,memberData:a}=K();async function l(){await s()}return N(async()=>{l()}),(d,r)=>{const i=E("RouterLink");return g(),c("div",se,[n("div",le,[n("div",ie,[n("div",re,[n("div",oe,[r[1]||(r[1]=B("Member ")),$(i,{style:{float:"right"},to:"/create-members",class:"btn btn-primary"},{default:R(()=>r[0]||(r[0]=[B("Create Member ")])),_:1})]),n("div",ue,[$(I,{loading:m(t),members:m(a)},{pagination:R(()=>{var u,o;return[(u=m(a))!=null&&u.data?(g(),D(m(ne),{key:0,data:(o=m(a))==null?void 0:o.data,onPaginationChangePage:m(s)},null,8,["data","onPaginationChangePage"])):_("",!0)]}),_:1},8,["loading","members"])])])])])])}}});export{me as default};
