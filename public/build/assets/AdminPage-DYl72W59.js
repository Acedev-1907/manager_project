import{d as b,b as _,o as l,c,e,u as m,f as d,t as f,F as h,h as w,a as u,g,n as y,R as x,r as U,T as $,i as C,j as E}from"./app-DaLdgCdF.js";import{A as L,m as T,s as j,g as B}from"./toast-notificaltion-BEiIHqqv.js";import{s as I}from"./utils-DqYZlPan.js";const M={id:"sidebarMenu",style:{"background-color":"white"},class:"col-md-3 col-lg-2 d-md-block sidebar collapse"},N={class:"position-sticky pt-3"},P={align:"center"},R=["src"],A={class:"nav flex-column"},D=b({__name:"NarBar",props:{loggedInUserEmail:{}},emits:["logout"],setup(n,{emit:i}){const o=_([{name:"Dashboard",link:"/admin",icon:"bi bi-wrench-adjustable"},{name:"Projects",link:"/projects",icon:"bi bi-file-ppt"},{name:"Members",link:"/members",icon:"bi bi-file-ppt"}]),t=i;return(r,s)=>(l(),c("nav",M,[e("div",N,[e("div",P,[e("img",{src:`${m(L).baseURL}/others/logo.png`,style:{height:"55px"},alt:""},null,8,R),s[1]||(s[1]=e("h4",null,"TaskMgr",-1)),d(" "+f(r.loggedInUserEmail),1)]),s[3]||(s[3]=e("br",null,null,-1)),s[4]||(s[4]=e("h6",{class:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[e("span",{style:{color:"red"}},"Menu"),e("a",{class:"link-secondary",href:"#","aria-label":"Add a new report"},[e("span",{"data-feather":"plus-circle"})])],-1)),e("ul",A,[(l(!0),c(h,null,w(o.value,a=>(l(),c("li",{class:"nav-item",key:a.name},[u(m(x),{class:"nav-link",to:a.link,exact:""},{default:g(()=>[e("i",{class:y(a.icon)},null,2),d(" "+f(a.name),1)]),_:2},1032,["to"])]))),128)),e("li",{class:"nav-item",style:{cursor:"pointer"},onClick:s[0]||(s[0]=a=>t("logout"))},s[2]||(s[2]=[e("a",{class:"nav-link"},[e("i",{class:"bi bi-box-arrow-right"}),d(" Logout ")],-1)]))])])]))}});function S(){const n=_(!1);async function i(o){try{n.value=!0;const t=await T("logout","POST",{userId:o});n.value=!1,j(t.message)}catch(t){I(t),n.value=!1,t.message=="Not authenticated"&&(window.location.href="/app/login"),n.value=!1}}return{logout:i,loading:n}}const V={class:"container"},F={class:"container-fluid"},O={class:"row"},q={class:"col-md-9 ms-sm-auto col-lg-10 bg-pages"},J=b({__name:"AdminPage",setup(n){const{logout:i}=S(),o=B();async function t(){var s;const r=(s=o==null?void 0:o.user)==null?void 0:s.id;typeof r<"u"&&(await i(r),localStorage.clear(),setTimeout(()=>window.location.href="/app/login",1e3))}return(r,s)=>{var p;const a=U("router-view");return l(),c("div",V,[e("div",F,[e("div",O,[u(D,{loggedInUserEmail:(p=m(o))==null?void 0:p.user.email,onLogout:t},null,8,["loggedInUserEmail"]),e("main",q,[s[0]||(s[0]=e("br",null,null,-1)),s[1]||(s[1]=e("br",null,null,-1)),u(a,null,{default:g(({Component:v,route:k})=>[u($,{name:"fade",mode:"out-in"},{default:g(()=>[(l(),c("div",{key:k.name},[(l(),C(E(v)))]))]),_:2},1024)]),_:1})])])])])}}});export{J as default};
