import{b as f,d as B,r as l,o as b,c as L,e as s,w as y,a,u as r,g as E,f as k}from"./app-CADoG00p.js";import{u as I,r as p,e as $}from"./index-B_rufATu.js";import{m as x}from"./makeHttpReq-IEoXqM35.js";import{s as C,a as N}from"./toast-notificaltion-Cc3Mv6Zn.js";import{s as R}from"./utils-Dc91b2uC.js";const t=f({});function S(){const n=f(!1);async function u(){try{n.value=!0;const e=await x("login","POST",t.value);n.value=!1,t.value={},C(e.message),e.isLoggedIn&&(localStorage.setItem("userData",JSON.stringify(e)),window.location.href="/app/admin")}catch(e){R(e),n.value=!1;for(const i of e)N(i)}}return{login:u,loading:n}}const h={class:"row"},P={class:"row"},U={class:"col-md-4"},q={class:"card"},M={class:"card-body"},O={class:"form-group"},T={class:"form-group"},D={class:"form-group"},H={class:"form-group mt-3"},G=B({__name:"LoginPage",setup(n){const e=I({email:{required:p,email:$},password:{required:p}},t),{loading:i,login:g}=S();async function v(){await e.value.$validate()&&(await g(),e.value.$reset())}return(_,o)=>{const m=l("Error"),c=l("BaseInput"),w=l("RouterLink"),V=l("BaseBtn");return b(),L("div",h,[s("div",P,[o[5]||(o[5]=s("div",{class:"col-md-4"},null,-1)),s("div",U,[s("div",q,[s("div",M,[o[3]||(o[3]=s("h2",{align:"center"},"Login",-1)),o[4]||(o[4]=s("br",null,null,-1)),s("form",{onSubmit:y(v,["prevent"])},[s("div",O,[a(m,{label:"Email",errors:r(e).email.$errors},null,8,["errors"]),a(c,{modelValue:r(t).email,"onUpdate:modelValue":o[0]||(o[0]=d=>r(t).email=d)},null,8,["modelValue"])]),s("div",T,[a(m,{label:"Password",errors:r(e).password.$errors},null,8,["errors"]),a(c,{modelValue:r(t).password,"onUpdate:modelValue":o[1]||(o[1]=d=>r(t).password=d),type:"password"},null,8,["modelValue"])]),s("div",D,[a(w,{to:"/register"},{default:E(()=>o[2]||(o[2]=[k("Create an account")])),_:1})]),s("div",H,[a(V,{label:"login",loading:r(i)},null,8,["loading"])])],32)])])]),o[6]||(o[6]=s("div",{class:"col-md-4"},null,-1))])])}}});export{G as default};
